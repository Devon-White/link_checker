# Lychee link checker configuration for linkaudit
# https://lychee.cli.rs/configuration/

# Verbose program output
verbose = "warn"

# Accept these HTTP status codes as valid
# 403 included because many sites block automated requests
accept = [200, 204, 301, 302, 307, 308, 403]

# User agent - Use a recent Chrome version to avoid bot detection
user_agent = "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36"

# Custom headers to appear more browser-like (inline table format)
header = { "Accept" = "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8", "Accept-Language" = "en-US,en;q=0.9", "Cache-Control" = "no-cache" }

# Show progress bar
no_progress = false

# Request timeout in seconds
timeout = 30

# Maximum number of retries per request
max_retries = 3

# Wait time between retries (seconds)
retry_wait_time = 5

# Maximum concurrent requests - Reduced to avoid rate limiting
max_concurrency = 10

# Cache duration (1 day)
max_cache_age = "1d"

# Only check https links
scheme = ["https", "http"]

# When HTTPS available, treat HTTP as errors
require_https = false

# Exclude patterns (regex)
exclude = [
  "^https://example\\.com",
  "^https://github\\.com/owner/repo",
  "github\\.com/your-org/",
  "^https://us\\.i\\.posthog\\.com",
  "^https://c\\.vialoops\\.com",
  "_vercel/(speed-)?insights/",
  "^https://docs\\.stack-auth\\.com",
  "^https://(www\\.)?linkedin\\.com",
  "^https://(www\\.)?twitter\\.com",
  "^https://x\\.com",
  "^https://www\\.npmjs\\.com",
  "^https://cdn\\.simpleicons\\.org",
  "^https://github\\.com/",
  "^mailto:",
  "^tel:",
  "^javascript:",
  "^#"
]
